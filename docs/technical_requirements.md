# 1. Цель проекта

Цель проекта — разработать мониторинг/аудит сайта торговой точки по базе юпласта, на наличие товарных позиций и также текстового содержимого


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. API взаимодествия с базой сайтов
2. Определение движка сайта
3. Поиск ссылок сайта, формирование карты
4. Анализ страницы/товара на содержимое
5. Анализ товара на изображения
6. Поиск каталога товаров
7. Поиск слайдера/баннера на главной странице
8. Поиск страницы по определенному содержимому
9. Поиск товаров в топе категорий


## 2.1. API взаимодествия с базой сайтов

Необходимо реализовать API на стороне юпласта с функциями:

1. Получить список сайтов
2. Назначение движка сайта
3. Назначение ошибки при подключении или парсинге
4. Назначение статуса задачи
5. Назначение результата парсинга
6. Сохранение карты сайта ( сохраняя ссылку, ключевики, описание и заголовок )

Определять движок необходимо с помощью какого нибудь стороннего сервиса, при указании ошибки необходимо передавать дату, время, и тип ошибки.
Задача имеет статусы

* Выполнено 
* Выполнено с ошибками
* Не выполнено

Помимо получения списка сайтов, необходимо чтобы сервер передавал значения задач, задачи описаны ниже, к ним же должен парилагаться контент содержимое страницы. Допустим если это поиск страницы, значит там должен передавать текст, или если это поиск по категориям, значит должны передаваться классы на поиск. А также ранее найденная страница, если допустим страница была найдена ранее. В случае если по ранее найденно странице ничего нет, или выдает ошибку. Значит передавать это на сервер, о том что сайт был измнен, или не доступен и т.д.



## 2.2. Определение движка сайта

*Найти сервис с помощью которого необходимо определять движок сайта*


## 2.3. Поиск ссылок сайта, формирование карты

В зависимости от движка, у нас должны быть прописаны алгоритмы откуда мы будем брать ссылки на сайт
В остальных случаях должны быть задействованы алгоритмы по поиску <a элементов на сайте, с ограничением которое можно указать программно, по дефолту 500 ссылок.


## 2.4. Анализ страницы/товара на содержимое

На стороне сервера должны хранится наборы слов, ключевиков которые необходимо сверять с страницей, и высчитывать процент совпадений, например:
1500 - исходное количество слов
354 - найдено на странице
значит совпадение ключевиков = 24%
*(354/1500) * 100 = 24*
Также внести критерий на процент, который в случае превышения можно считать что контент внесен (базовый 80%)


## 2.4. Анализ товара на изображения

(чтобы был сайдинг который сканировать с помощью нейронок + дом которым обшит сайдинг, Фото готовых объектов Ю-Пласт )
Необходимо с помощью алгоритма определять где находится заглавное изображение и галерея, алгоритм:
Находить элементы по ключевикам ".gallery", ".thums" и т.д. с возможностью редактирования классов, и внутри этих классов находить все изображения с указанием размера минимального (чтобы отсечь всякие кнопки), если теги не найдены, отправлять на сервер ошибку, и далее уже эту страницу нужно будет обработать вручную ( определив тег, и добавив в пул, либо сделать индивидуальный параметр для обей системы )


После того как получили изображения нужно применять алгоритм на качественный показатель.


*Алгоритм проверки изображения на качественный показатель — такие как наличие дома на фото, какой сайдинг расположен, качественная картинка или нет, необходимо проработать после базового алгоритма*


## 2.5. Поиск каталога товаров

Первым уровнем, мы должны выбирать по заголовку страницы, или его описания, или ключевиков.
Вторым уровнем оно должно искать по классу, т.е. должно быть три класса:
1. Блок с каталогом
2. Класс товара
3. Класс для переключения страницы

Если есть данные классы на странице, можно считать что товары найдены. В остальном случае отправлять ошибку на сервер, и уже эти классы обрабатывать вручную.
Также необходимо определять, какая страница с каталогом, для этого необходимо собрать перечень ключевиков по товарным позициям, и на странице где больше всех нашло ключевиков по товарам, считать эту страницу как страницу с каталогом + проверять ещё на наличие тегов на странице с блоком каталога, допустим:

Название блока каталога это ".shop" значит если там есть такой тег на странице (даже DOM пусть) то тогда можно считать страницу найденой с каталогом. Также должна быть возможность редактировать эту страницу вручную


## 2.6. Поиск слайдера/баннера на главной странице

На главной странице находить баннер по классу, а также получать все ссылки которые ведет этот баннер, если ссылка совпадет с каталогом юпласт, можно считтаь что там есть слайдер который ведет на проудкцию юпласта, если слайдер не найден. То писать об ошибке на сайте, должна быть возможность указывать классы на баннер вручную.


## 2.7. Поиск страницы по определенному содержимому

Необходимо взять ссылки карты сайта, и пробегать по всему сайту сверяя набор слов с сайтом, также выстроить процент на сколько содержимое совпадает, и выбрать страницу топ 1 с учетом процента, допустим порог 60%. Если на странице слова совпадают на 70% значит такая страница проходит, если менее 60% значит страница не найдена. Сообщать об этом на сервер


## 2.8. Поиск товаров в топе категорий

Необходимо с помощью алгоритма определить где находится каталог, также определить есть ли там категория сайдинг. И уже на страинце первого уровня, сделать поиск товаров, если найден минимум 1 товар, можно считать что товары находятся в топе категорий. В случае если не удалось найти категории либо товары, сообщать на сервер об ошибке.


# 3. Предлагаемый стек технологий

1. Python 
2. Сервер Ubuntu ( Supervisor )
3. PHP API


